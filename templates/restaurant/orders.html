<!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Restaurant Orders</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
     <style>
         body {
             font-family: Arial, sans-serif;
             margin: 20px;
         }
         .order-card {
             border: 1px solid #ccc;
             padding: 10px;
             margin-bottom: 10px;
             border-radius: 5px;
         }
         .kanban-column {
             width: 300px;
             min-height: 200px;
             border: 1px solid #ddd;
             padding: 10px;
             margin-right: 10px;
             border-radius: 5px;
             display: inline-block;
             vertical-align: top;
         }
         .kanban-header {
             text-align: center;
             margin-bottom: 10px;
         }
     </style>
 </head>
 <body>
 

     <div class="container">
         <h1>Restaurant Orders</h1>
         <ul class="nav nav-tabs" id="myTab" role="tablist">
             <li class="nav-item" role="presentation">
                 <button class="nav-link active" id="new-tab" data-bs-toggle="tab" data-bs-target="#new" type="button" role="tab" aria-controls="new" aria-selected="true">New</button>
             </li>
             <li class="nav-item" role="presentation">
                 <button class="nav-link" id="preparing-tab" data-bs-toggle="tab" data-bs-target="#preparing" type="button" role="tab" aria-controls="preparing" aria-selected="false">Preparing</button>
             </li>
             <li class="nav-item" role="presentation">
                 <button class="nav-link" id="ready-tab" data-bs-toggle="tab" data-bs-target="#ready" type="button" role="tab" aria-controls="ready" aria-selected="false">Ready</button>
             </li>
         </ul>
         <div class="tab-content" id="myTabContent">
             <div class="tab-pane fade show active" id="new" role="tabpanel" aria-labelledby="new-tab">
                 <h2>New Orders</h2>
                 <div id="new-orders-container">
                     {% for order in new_orders %}
                         <div class="order-card">
                             <p>Order ID: {{ order.id }}</p>
                             <p>Customer: {{ order.customer_id }}</p>
                             <p>Items: {{ order.items }}</p>
                             <button class="btn btn-primary btn-sm" onclick="updateOrderStatus({{ order.id }}, 'preparing')">Mark as Preparing</button>
                         </div>
                     {% endfor %}
                 </div>
             </div>
             <div class="tab-pane fade" id="preparing" role="tabpanel" aria-labelledby="preparing-tab">
                 <h2>Preparing Orders</h2>
                 <div id="preparing-orders-container">
                     {% for order in preparing_orders %}
                         <div class="order-card">
                             <p>Order ID: {{ order.id }}</p>
                             <p>Customer: {{ order.customer_id }}</p>
                             <p>Items: {{ order.items }}</p>
                             <button class="btn btn-success btn-sm" onclick="updateOrderStatus({{ order.id }}, 'ready')">Mark as Ready</button>
                         </div>
                     {% endfor %}
                 </div>
             </div>
             <div class="tab-pane fade" id="ready" role="tabpanel" aria-labelledby="ready-tab">
                 <h2>Ready Orders</h2>
                 <div id="ready-orders-container">
                     {% for order in ready_orders %}
                         <div class="order-card">
                             <p>Order ID: {{ order.id }}</p>
                             <p>Customer: {{ order.customer_id }}</p>
                             <p>Items: {{ order.items }}</p>
                         </div>
                     {% endfor %}
                 </div>
             </div>
         </div>
     </div>
 

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
     <script>
         function updateOrderStatus(orderId, newStatus) {
             fetch(`http://127.0.0.1:5000/api/orders/${orderId}/status`, {
                 method: 'PUT',
                 headers: {
                     'Content-Type': 'application/json'
                 },
                 body: JSON.stringify({ status: newStatus })
             })
             .then(response => {
                 if (response.ok) {
                     // Refresh the page or update the order lists dynamically
                     window.location.reload();
                 } else {
                     console.error('Failed to update order status');
                 }
             })
             .catch(error => {
                 console.error('Error:', error);
             });
         }
     </script>
 </body>
 </html>